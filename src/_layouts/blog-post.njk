<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if title %}{{ title }} - {% endif %}Joel Tsuchitori</title>
    <base href="/">
    
    <!-- Open Graph meta tags -->
    <meta property="og:title" content="{% if title %}{{ title }}{% else %}Joel Tsuchitori{% endif %}">
    <meta property="og:description" content="{% if excerpt %}{{ excerpt }}{% else %}Personal website and blog{% endif %}">
    <meta property="og:type" content="{% if layout == 'post.njk' %}article{% else %}website{% endif %}">
    {% if og_image %}
    <meta property="og:image" content="{{ og_image }}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    {% endif %}
    
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" href="/pictures/favicon-design.svg" type="image/svg+xml">
</head>
<body>
    <nav class="blog-nav">
        <div class="container">
            <a href="/blog/index.html" class="back-arrow">← Back to Blog</a>
        </div>
    </nav>

    <main class="container">
        <article class="blog-post">
            <header>
                <h1>{{ title }}</h1>
                <div class="blog-meta">
                    Published on {{ date | dateDisplay }}
                    {% if tags %}
                        • Tags: {% for tag in tags %}{{ tag }}{% if not loop.last %}, {% endif %}{% endfor %}
                    {% endif %}
                </div>
            </header>
            
            <div class="blog-content">
                {{ content | safe }}
            </div>
        </article>
    </main>

    <footer>
        <div class="container">
            <p>&copy; <span id="year"></span> Joel Tsuchitori. All rights reserved.</p>
        </div>
    </footer>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        let lastScrollTop = 0;
        const footer = document.querySelector('footer');
        
        window.addEventListener('scroll', () => {
            const nearBottom = window.innerHeight + window.scrollY >= document.documentElement.scrollHeight - 100;
            if (nearBottom) {
                footer.classList.add('visible');
            } else {
                footer.classList.remove('visible');
            }
        });
    </script>
</body>
</html>